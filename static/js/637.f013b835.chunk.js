"use strict";(self.webpackChunkreact_01=self.webpackChunkreact_01||[]).push([[637],{3637:function(e,t,s){s.r(t),s.d(t,{default:function(){return X},withRouter:function(){return $}});var a=s(1413),r=s(5671),o=s(3144),n=s(136),i=s(8557),l=s(2791),u=s(364),c=s(819),p=s(7781),m=s(7226),f=s(81),h={parallax:"profile_parallax__2ResI"},d=s(9439),x=s(8182),j=s(211),_=s(2317),b=s(4439),g=s(6139),v=s(704),N=s(3079),k=s(1999),Z="profile-data-form_label__gQoQd",S="profile-data-form_link__Vrkam",P="profile-data-form_form__cAwn9",F="profile-data-form_paragraph__j6pZ-",w=s(184),y=function(e){var t=e.contact;return(0,w.jsxs)("div",{className:S,children:[(0,w.jsx)("label",{htmlFor:t,className:Z,children:"".concat(t,": ")}),(0,w.jsx)(g.Z,{component:k.I,type:"text",id:t,name:"contacts."+t})]})},A=(0,v.Z)({form:"profile"})((function(e){var t=e.handleSubmit,s=e.error,a=e.profile,r=(0,l.useState)(!1),o=(0,d.Z)(r,2),n=o[0],i=o[1];return s&&console.log(s),(0,w.jsxs)("form",{className:P,onSubmit:t,children:[(0,w.jsxs)("label",{htmlFor:"fullName",className:Z,children:["Fullname:"," "]}),(0,w.jsx)(g.Z,{component:k.I,validate:[N.C],type:"text",id:"fullName",name:"fullName"}),(0,w.jsxs)("label",{htmlFor:"aboutMe",className:Z,children:["About me:"," "]}),(0,w.jsx)(g.Z,{component:k.g,validate:[N.C],type:"text",id:"aboutMe",name:"aboutMe"}),(0,w.jsx)(g.Z,{component:k.I,type:"checkbox",id:"lookingForAJob",name:"lookingForAJob",onChange:function(e){var t=e.target;i(t.checked)},className:b.Z.checkbox}),(0,w.jsx)("label",{htmlFor:"lookingForAJob",className:b.Z.checkboxLabel,children:"Looking for a job"}),n&&(0,w.jsxs)("label",{htmlFor:"lookingForAJobDescription",className:Z,children:["Your skills:"," "]}),n&&(0,w.jsx)(g.Z,{component:k.g,validate:[N.C],id:"lookingForAJobDescription",name:"lookingForAJobDescription"}),(0,w.jsx)("p",{className:F,children:"Contacts:"}),Object.keys(a.contacts).map((function(e){return(0,w.jsx)(y,{contact:e},e)})),s&&(0,w.jsx)("p",{className:b.Z.formSummaryError,children:s}),(0,w.jsx)("button",{className:b.Z.button,children:"Save"})]})})),C="profile-status_container__HvjWR",D="profile-status_input__72uKi",I="profile-status_text__7aJ-9",J=function(e){var t=(0,l.useState)(!1),s=(0,d.Z)(t,2),a=s[0],r=s[1],o=(0,l.useState)(e.status),n=(0,d.Z)(o,2),i=n[0],u=n[1];(0,l.useEffect)((function(){e.isOwner&&u(e.status)}),[e.status,e.isOwner]);return(0,w.jsx)("div",{className:C,children:a?(0,w.jsx)("input",{className:D,onBlur:function(){r(!1),e.updateStatus(i)},onChange:function(e){u(e.currentTarget.value)},value:i||"",autoFocus:!0,maxLength:300}):(0,w.jsx)("p",{className:I,onDoubleClick:function(){e.isOwner&&r(!0)},children:e.status||"No status"})})},O={user:"user_user__s9iKW",image:"user_image__YH3Qz",input:"user_input__NTRs8",label:"user_label__SFuo-",aboutUser:"user_aboutUser__NPzWn",contacts:"user_contacts__l3zWG",button:"user_button__WDYvr"},U=function(e){var t=e.href;return(0,w.jsx)("i",{children:t?(0,w.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",children:t}):"no link"})},M=function(e){var t=e.profile,s=e.status,a=e.updateStatus,r=e.isOwner,o=e.toEditMode;return(0,w.jsxs)("div",{children:[(0,w.jsx)("h2",{className:O.header,children:t.fullName||"username"}),(0,w.jsx)(J,{status:s,updateStatus:a,isOwner:r}),(0,w.jsxs)("div",{className:O.aboutUser,children:[(0,w.jsxs)("p",{children:["About me: ",(0,w.jsx)("i",{children:t.aboutMe||"no info"})]}),(0,w.jsxs)("p",{children:["Looking for a job: ",(0,w.jsx)("i",{children:t.lookingForAJob?"yes":"no"})]}),t.lookingForAJob&&(0,w.jsxs)("p",{children:["My professional skills: ",(0,w.jsx)("i",{children:t.lookingForAJobDescription||"no description"})]})]}),(0,w.jsxs)("div",{className:O.contacts,children:[(0,w.jsx)("p",{children:"Contacts:"}),Object.keys(t.contacts).map((function(e){return(0,w.jsxs)("p",{children:[e,": ",(0,w.jsx)(U,{href:t.contacts[e]})]},e)}))]}),r&&(0,w.jsx)("button",{onClick:o,className:(0,x.Z)(b.Z.button,O.button),children:"Edit"})]})},z=function(e){var t=e.profile,s=e.status,a=e.updateStatus,r=e.isOwner,o=e.savePhoto,n=e.setProfileData,i=(0,l.useState)(!1),u=(0,d.Z)(i,2),c=u[0],p=u[1],m=function(){return p(!1)};if(!t)return(0,w.jsx)(_.Z,{});return(0,w.jsxs)("div",{className:O.user,children:[(0,w.jsxs)("div",{className:O.avatar,children:[(0,w.jsx)("img",{className:O.image,src:t.photos.large||j,alt:"user"}),r&&(0,w.jsx)("input",{className:O.input,type:"file",onChange:function(e){e.target.files&&e.target.files.length&&o(e.target.files[0])},id:"photo"}),r&&(0,w.jsx)("label",{className:O.label,htmlFor:"photo",children:"Choose photo"})]}),c?(0,w.jsx)(A,{initialValues:t,fromEditMode:m,onSubmit:function(e){console.log("formData",e),n(e).then((function(){return m()}))},profile:t}):(0,w.jsx)(M,{profile:t,status:s,updateStatus:a,isOwner:r,toEditMode:function(){return p(!0)}})]})},E="posts_posts__zalJ9",W="posts_header__wgjik",R="posts_button__FtaA0",L={post:"post_post__qbpcU",avatar:"post_avatar__GHvuP",username:"post_username__Ewa3W"},q=function(e){return(0,w.jsxs)("div",{className:L.post,children:[(0,w.jsx)("img",{className:L.avatar,src:e.photo||j,alt:"user"}),(0,w.jsxs)("div",{className:L.text,children:[(0,w.jsx)("p",{className:L.username,children:e.username}),(0,w.jsx)("p",{className:L.posttext,children:e.message})]})]})},H=(0,N.D)(400),Q=(0,v.Z)({form:"addPost"})((function(e){return(0,w.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,w.jsx)(g.Z,{component:k.g,validate:[N.C,H],className:b.Z.textarea,name:"post",rows:"5",placeholder:"your news...",required:!0}),(0,w.jsx)("button",{className:R,children:"Send"})]})})),Y=l.memo((function(e){var t=e.postsData.map((function(t){return(0,w.jsx)(q,{username:e.username,message:t.message,photo:e.photo},t.message)}));return(0,w.jsxs)("div",{className:E,children:[(0,w.jsx)("h3",{className:W,children:"My posts"}),(0,w.jsx)(Q,{onSubmit:function(t){e.addPost(t.post)}}),t]})})),G=f.Nw.addPostActionCreator,K=(0,u.$j)((function(e){return{postsData:e.profilePage.postsData}}),{addPost:G})(Y),T=function(e){return(0,w.jsxs)("main",{className:h.content,children:[(0,w.jsx)(z,{profile:e.profile,status:e.status,updateStatus:e.updateStatus,isOwner:e.isOwner,savePhoto:e.savePhoto,setProfileData:e.setProfileData}),(0,w.jsx)(K,{username:e.profile?e.profile.fullName:"username",photo:e.profile?e.profile.photos.small:null})]})},V=function(e){(0,n.Z)(s,e);var t=(0,i.Z)(s);function s(){return(0,r.Z)(this,s),t.apply(this,arguments)}return(0,o.Z)(s,[{key:"refreshProfile",value:function(){var e,t=this;if(this.props.match&&this.props.match.params.userId)e=+this.props.match.params.userId;else{if(!this.props.isAuth||!this.props.authorizedUserId)return(0,w.jsx)(c.Fg,{to:"/login"});e=this.props.authorizedUserId}m.F.getProfile(e).then((function(e){return t.props.setUserProfile(e)})),m.F.getStatus(e).then((function(e){return t.props.updateStatus(e)}))}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e){(this.props.match?this.props.match.params.userId:null)!==(e.match?e.match.params.userId:null)&&this.refreshProfile()}},{key:"render",value:function(){return(0,w.jsx)(T,(0,a.Z)((0,a.Z)({},this.props),{},{isOwner:!this.props.match}))}}]),s}(l.Component),$=function(e){return function(t){var s=(0,c.bS)("/profile/:userId/");return(0,w.jsx)(e,(0,a.Z)((0,a.Z)({},t),{},{match:s}))}},B=f.Nw.setUserProfile,X=(0,p.qC)((0,u.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{setUserProfile:B,getStatus:f.lR,updateStatus:f.Nf,savePhoto:f.Ju,setProfileData:f._J}),$)(V)},211:function(e,t,s){e.exports=s.p+"static/media/user-avatar.0d10fc623bbf0cfa34b9.png"}}]);
//# sourceMappingURL=637.f013b835.chunk.js.map